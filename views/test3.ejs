<% include ./partials/header %>
<style>
.footer {
  background: lightgreen;
}
</style>

<div class="col-lg-11 ms-paper-content-container">
              <div class="ms-paper-content">
                <div class="alert alert-light alert-info">
                    
                  <p><span class="ml-auto badge-pill badge-pill-info"><%=currentUser.score %></span>    Each question is worth 20 points.
                    <strong>                   
                    </strong> Good Luck!</p>
                    
                </div>
    </div>
</div>
                  
                  
           
<div id="video" style="text-align: center">
<div class="col-md-4" style="display:inline-block">
        <h3 class="text-center">Square Number Problems</h3>
        <div class="card card-info-inverse">
            <div class="card-header">
                <h3 class="card-title"><i class="zmdi zmdi-graduation-cap"></i> 4 out of the 5 pieces can be joined together to make a square. Which is the odd one out?</h3>
            </div>
            <div class="js-player">
            <script src="https://snowytopmaths.cdn.vooplayer.com/assets/vooplayer.js"></script><iframe allow="autoplay" class="video-player-container vooplayer" data-playerId="MTUxOTUz" allowtransparency="true" style="max-width:100%" name="vooplayerframe" allowfullscreen="true" src="" watch-type="" url-params="" frameborder="0" scrolling="no"> </iframe>
            </div>
            <div class="card-body overflow-hidden text-center">
              </div>  
            </div>
        </div>
    </div>
   

<div class="container">
            <p id="userId"><%=currentUser.id %> </p>  
  </div>

       
<div  id="qHolder" style="text-align: center">
    <div class="card card-royal col-md-4" style="display:inline-block" >
<!--        First question-->
        <div class="mySlides">
                        <div class="card-header">
                          <h3 class="card-title">1.</h3>
                        </div>
                        <div class="card-body"> 
                            <form  name="quiz1">
                                <p class='q'>3 out of the 4 shapes below can be formed to make a square. Which is the odd one out? (A,B,C or D)<img src="img/squares1A.png" alt="" class="img-fluid"></p> 
  <div class="form-group">
      <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
            <div class="row">
                <button type="button" id="button1" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                  <button type="button" id="next1" class="btn btn-danger btn-raised"> Next </button>
                            <div id="tick">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div> 
      </div>
<!--    question 2-->
      <div class="mySlides">
                        <div class="card-header">
                          <h3 class="card-title">2.</h3>
                        </div>
                        <div class="card-body"> <p class='q'>4 out of the 5 shapes below can be formed to make a square.<br> Which is the odd one out? (A,B,C,D or E)<img src="img/squares2.png" alt="" class="img-fluid"></p>
                            <form name="quiz2">
  <div class="form-group">
        <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
                <div class="row">
                    <button type="button" id="button2" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                            <div id="tick2">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong2">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                </div>
       </div>                             
        </form>
    </div>
                   
      
<!--final div -->                 
</div>
                  
    
<!--                    <button type="button" id="button" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check Answers </button> -->
                    
                  <div class="modal modal-primary" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel4">
                    <div class="modal-dialog animated zoomIn animated-3x" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h3 class="modal-title" id="myModalLabel4"> <%=currentUser.username %>, you have scored </h3>
                            
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">
                              <i class="zmdi zmdi-close"></i>
                            </span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div class="alert alert-success alert-light " role="alert"><p id="badge"></p>
</div>
                          <div class="alert alert-danger alert-light " role="alert"><p id="points"></p>
</div>
                            
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>    
                        </div>
                      </div>
                    </div>
                  </div>
                                <footer class="footer">
    <div class="dot-container">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
</div>    
    </footer>
    <div id="example"></div>                                    
<script>
   var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);    
    document.getElementById("tick").style.visibility = "hidden";
    document.getElementById("wrong").style.visibility = "hidden";
    document.getElementById("msg").style.visibility = "hidden";
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
}    
  

    $("#example").load("./config");

    
    
    var correct = 0;
    $("#button").click(function(){  
        
        var question1 = document.quiz1.question1.value;  
        var question2 = document.quiz2.question1.value;
        var question3 = document.quiz3.question1.value;
        var question4 = document.quiz4.question1.value;
        var question5 = document.quiz5.question1.value;
        var question6 = document.quiz6.question1.value;
        
    if(question1 == 'A'){
        checkAnswer();     
        document.getElementById("tick").style.visibility = "visible";
            correct++;
  } else {
      document.getElementById("wrong").style.visibility = "visible";
  }
        if(question2 == 'B'){
        checkAnswer();     
        document.getElementById("tick2").style.visibility = "visible"; 
        correct++;
  }  else {
      document.getElementById("wrong2").style.visibility = "visible";
  }
      if(question3 == 'C'){
        checkAnswer();     
        document.getElementById("tick3").style.visibility = "visible";
      correct++;
  }     
      else {
      document.getElementById("wrong3").style.visibility = "visible";           
  } 
        if(question4 == '10'){
        checkAnswer();     
        document.getElementById("tick4").style.visibility = "visible";
      correct++;
  }     
      else {
      document.getElementById("wrong4").style.visibility = "visible";        
  } 
        if(question5 == '6' ){
        checkAnswer();     
        document.getElementById("tick5").style.visibility = "visible";
      correct++;
  }     
      else {
      document.getElementById("wrong5").style.visibility = "visible";        
  } 
        if(question6 == '0.4'){
        checkAnswer();     
        document.getElementById("tick6").style.visibility = "visible";
      correct++;
  }     
      else {
      document.getElementById("wrong6").style.visibility = "visible";        
  } 
        if(correct==6){
            document.getElementById("badge").textContent= " 6 out of 6. Wow!";
            document.getElementById("points").textContent="Points earned: 60";
        }
        if(correct==5){
            document.getElementById("badge").textContent= " 5 out of 6";
            document.getElementById("points").textContent="Points earned: 100";
        }
        if(correct==4){
            document.getElementById("badge").textContent= " 4 out of 6";
            document.getElementById("points").textContent="Points earned 80";
        }
        
        if(correct==3){
            document.getElementById("badge").textContent= " 3 out of 6";
           document.getElementById("points").textContent="Points earned:  60";
        }
        if(correct==2){
            document.getElementById("badge").textContent= " 2 out of 6";
           document.getElementById("points").textContent="Points earned 40";
        }
        if(correct==1){
            document.getElementById("badge").textContent= " 1 out of 6";
           document.getElementById("points").textContent="Points earned:  20";
        }
        if(correct==0){
            document.getElementById("badge").textContent= "0 out of 6. Watch the video and try the questions again. You will get it right.";
            document.getElementById("points").textContent="Points earned : 0";
            
        }
       });
    
    function checkAnswer(){
        
        var id =  $("#userId").text(); 
        var url = "https://api.mlab.com/api/1/databases/maths_app/collections/users/";
        var api= $("#example").text();
        var idAndApi = id + api;
        
        var sliced = id.slice(0,-1);
        var finalApi = url + sliced +api;
        
        $.ajax({           
            url: finalApi,
            type:"put",
                data: JSON.stringify( { "$inc" : { "score" : 20 } } ),
            contentType:"application/json",
            success:function(data){
                getScore();
                $("#jquery").text(data.score);
            },
            error:function(xhr, status, error){
                console.log(error);
            }
        });
        
    function getScore(){        
        var id =  $("#userId").text(); 
        var url = "https://api.mlab.com/api/1/databases/maths_app/collections/users/";
        var api= $("#example").text();
        var idAndApi = id + config;
        
        var sliced = id.slice(0,-1);
        var finalApi = url + sliced +api;
    $.ajax({          
        url:finalApi,
            type:"get",
            data: JSON.stringify(),
            contentType:"application/json",
            success:function(data){
                $("#jquery").text(data.score);
            },
            error:function(xhr, status, error){
                console.log(error);
            }
        });   
    }
       };
          $('#button1').click(function(){
        var question1 = document.quiz1.question1.value;  
         if(question1 == 'A'||question1 == 'a'){
            checkAnswer();        
            document.getElementById("tick").style.visibility = "visible";
            correct++;
            document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("points").textContent="Points earned:  0";
          document.getElementById("wrong").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
      }
     })
    $('#button2').click(function(){
        var question2 = document.quiz2.question1.value;
         if(question2=='B'||question2=='b'){
            checkAnswer();     
            document.getElementById("tick2").style.visibility = "visible";
                correct++;
             document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("wrong2").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
          document.getElementById("points").textContent="Points earned:  0";
      }
     })
    $('#button3').click(function(){
        var question3 = document.quiz3.question1.value;
         if(question3 =='C'||question3 =='c'){
            checkAnswer();     
            document.getElementById("tick3").style.visibility = "visible";
                correct++;
             document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("wrong3").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
          document.getElementById("points").textContent="Points earned:  0";
      }
     })
        $('#button4').click(function(){
        var question4 = document.quiz4.question1.value;
         if(question4 =='10'){
            checkAnswer();     
            document.getElementById("tick4").style.visibility = "visible";
                correct++;
             document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("points").textContent="Points earned:  0";
          document.getElementById("wrong4").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
      }
     })
    $('#button5').click(function(){
        var question5 = document.quiz5.question1.value;
         if(question5 == '6'){
            checkAnswer();     
            document.getElementById("tick5").style.visibility = "visible";
                correct++;
             document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("wrong5").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
          document.getElementById("points").textContent="Points earned:  0";
      }
     })
       $('#button6').click(function(){
        var question6 = document.quiz6.question1.value;
         if(question6 == '0.4'){
            checkAnswer();     
            document.getElementById("tick6").style.visibility = "visible";
                correct++;
             document.getElementById("badge").textContent= " Correct";
             document.getElementById("points").textContent="Points earned:  20";
      } else {
          document.getElementById("wrong6").style.visibility = "visible";
          document.getElementById("badge").textContent= " Incorrect. Please try again";
          document.getElementById("points").textContent="Points earned:  0";
      }
     })
</script>
                    
<% include ./partials/footer %>
                                              
<!--
                <section class="ms-component-section">
                  <div class="row masonry-container">
                    
                    <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
                      <div class="card card-royal">
                        <div class="card-header">
                          <h3 class="card-title">1.</h3>
                        </div>
                        <div class="card-body"> 
                            <form  name="quiz1">
                                <p class='q'>3 out of the 4 shapes below can be formed to make a square. Which is the odd one out? (A,B,C or D)<img src="img/squares1A.png" alt="" class="img-fluid"></p> 
  <div class="form-group">
      <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
            <div class="row">
                <button type="button" id="button1" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                            <div id="tick">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div>
        </div>                             
        </form>
      </div>                    
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
                     <div class="card card-royal">
                        <div class="card-header">
                          <h3 class="card-title">2.</h3>
                        </div>
                        <div class="card-body"> <p class='q'>4 out of the 5 shapes below can be formed to make a square.<br> Which is the odd one out? (A,B,C,D or E)<img src="img/squares2.png" alt="" class="img-fluid"></p>
                            <form name="quiz2">
  <div class="form-group">
        <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
                <div class="row">
                    <button type="button" id="button2" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                            <div id="tick2">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong2">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                </div>
       </div>                             
        </form>
      </div>                    
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
                     <div class="card card-royal">
                        <div class="card-header">
                          <h3 class="card-title">3.</h3>
                        </div>
                        <div class="card-body"> <p class='q'>4 out of the 5 shapes below can be formed to make a square. <br>Which shape from the picture below is the odd one out?
                            <br>(A,B,C,D or E)<img src="img/squares3.png" alt="" class="img-fluid"></p>
                            <form name="quiz3">
  <div class="form-group">
        <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
           <div class="row">
               <button type="button" id="button3" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                            <div id="tick3">    
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong3">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div>
      </div>                             
        </form>
      </div>                    
                      </div>
                    </div>
    <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
        <div class="card card-royal">
            <div class="card-header">
                          <h3 class="card-title">4.</h3>
            </div>
                         
        <div class="card-body"> 
            <p class='q'> 4 out of these 5 numbers can be added together to make a square number.</p>
                            <p class='q'>8, 10, 12, 14, 15</p>
                            <p class='q'>Which is the odd one out?</p> 
    <form name="quiz4">
  <div class="form-group">
        <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
            <div class="row">
                <button type="button" id="button4" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                            <div id="tick4">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong4">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div>
       </div>                             
        </form>
      </div>                    
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
                    <div class="card card-royal">
                        <div class="card-header">
                          <h3 class="card-title">5.</h3>
                        </div>
                        <div class="card-body"> <p class='q'> 4 out of these 5 numbers can be added together to make a square number.</p>
                            <p class="q">4, 6, 18, 20, 22</p>
                            <p class='q'>Which is the odd one out?</p>
                            <form name="quiz5">
  <div class="form-group">
        <div id="questions" >
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
            <div class="row">
                <button type="button" id="button5" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                <div id="tick5">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                                </span></div>
                            <div id="wrong5">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                          
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div>
       </div>                             
        </form>
      </div>                    
                      </div>
                    </div>              
        <div class="col-lg-4 col-md-6 masonry-item wow fadeInUp animation-delay-2">
                    <div class="card card-royal">
                        <div class="card-header">
                          <h3 class="card-title">6.</h3>
                        </div>
                        <div class="card-body"><p class='q'> 4 out of these 5 numbers can be added together to make a square number.</p>
            <p class='q'>0.03,  0.2,  0.27,  0.4,  0.5</p>
            <p class='q'>Which is the odd one out?</p> 
<form name="quiz6">
  <div class="form-group">
        <div id="questions" ><p> </p>
      <input id="usr" type= "text" name = "question1" class="form-control" placeholder="Answer Here"></div>
        <div class="row">
            <button type="button" id="button6" class="btn btn-primary btn-raised" data-toggle="modal" data-target="#myModal4"> Check </button>
                <div id="tick6">
                            <span class="ms-icon ms-icon-lg ms-icon-circle color-success">
                        <i class="fa fa-check"></i>
                </span></div>
                            <div id="wrong6">
                      <span class="ms-icon ms-icon-lg ms-icon-circle color-danger">
                        <i class="fa fa-remove"></i>
                      </span>
                                </div>
                                </div>
       </div>                             
        </form>
      </div>                    
                      </div>
                      </div>                                      
                  </div>            
-->
